<input
  type="text"
  [formControl]="searchControl"
  placeholder="Buscar productos..."
/>



<h2>Lista de productos</h2>

<div *ngIf="loading">Cargando productos...</div>
<div *ngIf="error">Ocurrió un error al cargar los productos.</div>

<div *ngIf="!loading && !error">
  <div *ngFor="let product of products" class="search-result">  
   
  
  <div class="info">
       <img src="https://laptopmedia.com/wp-content/uploads/2024/09/2-26-e1725801265855.jpg" width="80" height="80">
  
    {{ product.name }} - {{ product.description }} - {{ product.price }}
    <button (click)="addToCart(product)"  class="addtocart" >Agregar al carrito</button>

    <label for="quantity">Cantidad:</label>
<select [formControl]="quantityControl" id="quantity">
  <option *ngFor="let qty of quantities" [value]="qty">{{ qty }}</option>
</select>
  </div>
  


<!-- Botón para mostrar resumen -->
<button (click)="mostrarResumen()"  *ngIf="!showSummary"  >Comprar ahora</button>

<!-- Resumen de compra -->
<div *ngIf="showSummary" class="resumen">
  <h3>Resumen de compra</h3>
  <p>Producto: {{ product.name }}</p>
  <p>Cantidad: {{ quantityControl.value }}</p>
 <!--se usa el operador de acseso seguro || para evitar error 
 de objeto posible valor null o undefined-->
  <p>Total: {{ product.price * (quantityControl.value || 1) | currency:'ARS' }}</p>


  <button (click)="buyNow(product)" class="buynow">Comprar ahora</button>

</div>

</div>





<p>{{errorredir}}</p>
  


<!-- Estado del pedido -->
<div *ngFor="let order of orders" class="order-card">
  <h3>Orden #{{ order.id }} - Estado: {{ order.status }}</h3>
  <p>Usuario: {{ order.user.username }} ({{ order.user.email }})</p>
  <p>Fecha: {{ order.createdAt | date:'short' }}</p>
  <p>Total: {{ order.total | currency:'ARS' }}</p>

  <h4>Items:</h4>
  <ul>
    <li *ngFor="let item of order.items">
      {{ item.productName }} - Cantidad: {{ item.quantity }} - Precio: {{ item.price | currency:'ARS' }}
    </li>
  </ul>
</div>

